<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Activity Log - SkillUp Hub</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; }
    .card { background: rgba(255,255,255,0.95); color: #333; }
    .activity-item { border-left: 4px solid #667eea; padding-left: 1rem; margin-bottom: 1.5rem; }
    .timestamp { color: #666; font-size: 0.9rem; }
    .action { font-weight: bold; color: #764ba2; }
  </style>
</head>
<body>
<div class="container">
  <h1 class="text-center mb-4">Your Activity Log</h1>
  <a href="/" class="btn btn-light mb-4">‚Üê Back to Home</a>

  <div class="card p-4">
    <h2 th:text="'Recent actions for ' + ${user.displayName ?: user.email}"></h2>

    <div th:if="${activities.isEmpty()}" class="text-center py-5">
      <p>No activities yet!</p>
    </div>

    <div th:each="activity : ${activities}" class="activity-item">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <span class="action" th:text="${activity.action}"></span>
          <small th:if="${activity.metadata}" class="ms-2 text-muted"
                 th:text="'(' + ${#strings.truncate(activity.metadata, 120)} + ')'"></small>
        </div>
        <span class="timestamp badge bg-secondary"
              th:text="${#temporals.format(activity.createdAt, 'dd MMM yyyy HH:mm')}"></span>
      </div>

      <!-- Optional: pretty-print metadata if it's JSON -->
      <div th:if="${activity.metadata}" class="mt-2 small text-muted">
        <pre th:text="${activity.metadata}" style="white-space: pre-wrap; background:#f8f9fa; padding:8px; border-radius:6px;"></pre>
      </div>
    </div>
  </div>
</div>
</body>
</html>